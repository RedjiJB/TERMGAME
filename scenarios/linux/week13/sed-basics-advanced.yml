mission:
  id: "linux/week13/sed-basics-advanced"
  title: "Text Transformation with sed"
  difficulty: advanced
  description: "Master sed stream editor for find/replace, text manipulation, and automated editing"
  estimated_time: 50
  tags:
    - linux
    - sed
    - regex
    - text-processing
    - advanced
    - week13
    - cst8207

environment:
  image: "ubuntu:22.04"
  workdir: "/home/learner"
  setup:
    - "apt-get update -qq && apt-get install -y -qq sed"
    - "mkdir -p /home/learner/data /home/learner/scripts"
    - |
      cat > /home/learner/data/config.txt << 'EOF'
      database_host=localhost
      database_port=5432
      database_user=admin
      database_password=oldpass123
      app_debug=true
      app_version=1.0.0
      cache_enabled=yes
      cache_ttl=3600
      log_level=DEBUG
      max_connections=100
      EOF
    - |
      cat > /home/learner/data/emails.txt << 'EOF'
      Contact john.doe@example.com for support
      Email us at support@company.org
      Reach admin at webmaster@site.net
      Send reports to reports@example.com
      Contact: sales@company.org
      EOF
    - |
      cat > /home/learner/data/code.py << 'EOF'
      # Configuration
      DEBUG = True
      VERSION = "1.0.0"
      API_KEY = "abc123"

      def process_data(data):
          # TODO: Add validation
          return data.strip()

      def calculate(x, y):
          # FIXME: Handle division by zero
          return x / y

      class UserManager:
          def __init__(self):
              # NOTE: This needs optimization
              self.users = []

      # End of file
      EOF
    - |
      cat > /home/learner/data/html.txt << 'EOF'
      <html>
      <head>
        <title>Test Page</title>
      </head>
      <body>
        <h1>Welcome</h1>
        <p>This is a test paragraph.</p>
        <p>Another paragraph here.</p>
        <div>Content in div</div>
      </body>
      </html>
      EOF
    - |
      cat > /home/learner/data/logs.txt << 'EOF'
      2026-01-09 10:15:23 ERROR Connection failed
      2026-01-09 10:16:45 INFO User logged in
      2026-01-09 10:17:12 ERROR Database timeout
      2026-01-09 10:18:55 WARN Low memory
      2026-01-09 10:19:03 INFO Request processed
      EOF

steps:
  - id: "understand-sed"
    title: "Introduction to sed"
    description: |
      **sed: Stream Editor**

      sed processes text streams, performing edits as text flows through.

      **Key concept:** sed doesn't edit files directly by default!
      - Reads input line by line
      - Applies commands to each line
      - Outputs modified text

      **Basic syntax:**
      sed 'command' file

      **Common uses:**
      - Find and replace text
      - Delete lines
      - Insert/append lines
      - Transform text
      - Extract specific lines

      **Most common command: s (substitute)**

      Basic format:
      sed 's/old/new/' file

      s       = substitute command
      old     = pattern to find (regex)
      new     = replacement text
      /       = delimiter (can use others)

      **Simple example:**

      Replace "cat" with "dog":
      echo "I have a cat" | sed 's/cat/dog/'
      Output: I have a dog

      **Important:** Only replaces FIRST occurrence per line!

      echo "cat cat cat" | sed 's/cat/dog/'
      Output: dog cat cat

      **Try a simple substitution:**
      sed 's/localhost/127.0.0.1/' data/config.txt

      This replaces "localhost" with "127.0.0.1"
    hint: "Basic sed syntax: sed 's/old/new/' file"
    validation:
      type: "command-output"
      command: "sed 's/localhost/127.0.0.1/' /home/learner/data/config.txt | grep '127.0.0.1'"
      matcher: "contains"
      expected: "127.0.0.1"

  - id: "global-flag"
    title: "Global Replacement with /g"
    description: |
      **The g Flag: Replace All Occurrences**

      By default, sed replaces only the first match per line.

      **Without g:**
      echo "foo foo foo" | sed 's/foo/bar/'
      Output: bar foo foo

      **With g:**
      echo "foo foo foo" | sed 's/foo/bar/g'
      Output: bar bar bar

      **Syntax:**
      sed 's/pattern/replacement/g' file

      The g at the end means "global" (all occurrences)

      **Practical example:**

      Replace all underscores with hyphens:
      echo "user_name_here" | sed 's/_/-/g'
      Output: user-name-here

      **Without g:**
      echo "user_name_here" | sed 's/_/-/'
      Output: user-name_here (only first _ replaced)

      **Practice:**

      Replace all 'a' with 'A':
      echo "banana" | sed 's/a/A/g'
      Output: bAnAnA

      Replace all @example.com with @newdomain.com:
      sed 's/@example\.com/@newdomain.com/g' data/emails.txt

      Note the escaped dot: \.

      Replace all "true" with "false":
      sed 's/true/false/g' data/config.txt

      **Try replacing all @example.com:**
      sed 's/@example\.com/@newdomain.com/g' data/emails.txt
    hint: "Add /g flag for global replacement: s/old/new/g"
    validation:
      type: "command-output"
      command: "sed 's/@example\\.com/@newdomain.com/g' /home/learner/data/emails.txt | grep '@newdomain.com'"
      matcher: "contains"
      expected: "@newdomain.com"

  - id: "in-place-editing"
    title: "Edit Files In-Place with -i"
    description: |
      **The -i Flag: Edit Files Directly**

      By default, sed outputs to stdout. Use -i to edit files in-place.

      **Without -i:**
      sed 's/old/new/' file.txt
      (shows changes, file unchanged)

      **With -i:**
      sed -i 's/old/new/' file.txt
      (modifies file directly!)

      **Safety: Create backup with -i.bak**

      sed -i.bak 's/old/new/' file.txt

      This creates:
      - file.txt (modified)
      - file.txt.bak (original backup)

      **Practical workflow:**

      1. Test command without -i first:
         sed 's/old/new/g' file.txt | less

      2. If looks good, add -i with backup:
         sed -i.bak 's/old/new/g' file.txt

      3. Verify changes:
         diff file.txt file.txt.bak

      4. If happy, delete backup:
         rm file.txt.bak

      **Warning:**
      -i is dangerous! Always test first or use backup!

      **Practice:**

      Make a copy first:
      cp data/config.txt data/config_test.txt

      Change password in file:
      sed -i.backup 's/oldpass123/newpass456/g' data/config_test.txt

      Verify:
      cat data/config_test.txt
      cat data/config_test.txt.backup

      Check difference:
      diff data/config_test.txt data/config_test.txt.backup

      **Try editing in-place with backup:**
      cp data/config.txt data/test_config.txt
      sed -i.bak 's/DEBUG/INFO/g' data/test_config.txt
      cat data/test_config.txt
    hint: "Use -i for in-place editing, -i.bak to create backup"
    validation:
      type: "command-output"
      command: "cp /home/learner/data/config.txt /tmp/test.txt && sed -i 's/localhost/server/' /tmp/test.txt && grep 'server' /tmp/test.txt"
      matcher: "contains"
      expected: "server"

  - id: "address-ranges"
    title: "Line Addressing and Ranges"
    description: |
      **Addressing: Apply Commands to Specific Lines**

      By default, sed processes ALL lines. Use addresses to target specific lines.

      **Address types:**

      **1. Line number:**
      sed '3s/old/new/' file
      (only line 3)

      **2. Range:**
      sed '2,5s/old/new/' file
      (lines 2 through 5)

      **3. Pattern match:**
      sed '/pattern/s/old/new/' file
      (lines containing "pattern")

      **4. Last line:**
      sed '$s/old/new/' file
      ($ = last line)

      **5. Pattern range:**
      sed '/start/,/end/s/old/new/' file
      (from line matching "start" to line matching "end")

      **Examples:**

      Change first line only:
      sed '1s/^/# /' file.txt
      (adds # at start of line 1)

      Change lines 2-4:
      sed '2,4s/old/new/' file.txt

      Change lines with "ERROR":
      sed '/ERROR/s/ERROR/CRITICAL/' file.txt

      Change from "TODO" to end of file:
      sed '/TODO/,$s/old/new/' file.txt

      **Negation with !:**

      Everything EXCEPT line 1:
      sed '1!s/old/new/' file.txt

      Everything EXCEPT lines with "ERROR":
      sed '/ERROR/!s/old/new/' file.txt

      **Practice:**

      Change only first line:
      sed '1s/database/db/' data/config.txt

      Change lines 5-7:
      sed '5,7s/=/ = /g' data/config.txt

      Change lines with "ERROR":
      sed '/ERROR/s/ERROR/[ERROR]/' data/logs.txt

      Change all but first line (skip header):
      sed '1!s/@example/@newdomain/' data/emails.txt

      **Try changing only ERROR lines:**
      sed '/ERROR/s/ERROR/[ERR]/' data/logs.txt
    hint: "Use line numbers or /pattern/ before command: sed '3s/old/new/'"
    validation:
      type: "command-output"
      command: "sed '/ERROR/s/ERROR/CRITICAL/' /home/learner/data/logs.txt | grep 'CRITICAL'"
      matcher: "contains"
      expected: "CRITICAL"

  - id: "delete-lines"
    title: "Delete Lines with d Command"
    description: |
      **The d Command: Delete Lines**

      d deletes entire lines (doesn't need substitute syntax)

      **Basic syntax:**
      sed 'd' file           # Delete all lines (empties file!)
      sed '3d' file          # Delete line 3
      sed '2,5d' file        # Delete lines 2-5
      sed '/pattern/d' file  # Delete lines matching pattern

      **Examples:**

      Delete blank lines:
      sed '/^$/d' file.txt

      ^$ matches empty lines (start ^ immediately followed by end $)

      Delete comment lines:
      sed '/^#/d' file.txt

      Delete lines containing "ERROR":
      sed '/ERROR/d' file.txt

      Delete first line (header):
      sed '1d' file.txt

      Delete last line:
      sed '$d' file.txt

      Delete lines 10-20:
      sed '10,20d' file.txt

      **Negation - delete everything EXCEPT:**

      Keep only ERROR lines (delete non-ERROR):
      sed '/ERROR/!d' file.txt

      Equivalent to grep 'ERROR' file.txt

      **Multiple deletions:**

      Delete comments and blank lines:
      sed '/^#/d; /^$/d' file.txt

      Or with -e:
      sed -e '/^#/d' -e '/^$/d' file.txt

      **Practice:**

      Remove blank lines:
      sed '/^$/d' data/code.py

      Remove comment lines:
      sed '/^#/d' data/code.py

      Remove TODO/FIXME comments:
      sed '/TODO/d; /FIXME/d' data/code.py

      Keep only ERROR lines:
      sed '/ERROR/!d' data/logs.txt

      Remove first and last lines:
      sed '1d; $d' data/config.txt

      **Try removing all comment lines:**
      sed '/^#/d' data/code.py
    hint: "Use d to delete: sed '/pattern/d' or sed '3d'"
    validation:
      type: "command-output"
      command: "sed '/^#/d' /home/learner/data/code.py | grep -v '^#' | head -1"
      matcher: "contains"
      expected: ""

  - id: "multiple-commands"
    title: "Multiple Commands with -e and ;"
    description: |
      **Running Multiple sed Commands:**

      **Method 1: Semicolon separator**
      sed 'cmd1; cmd2; cmd3' file

      **Method 2: Multiple -e flags**
      sed -e 'cmd1' -e 'cmd2' -e 'cmd3' file

      **Method 3: Newlines (in script)**
      sed '
        cmd1
        cmd2
        cmd3
      ' file

      **Examples:**

      Multiple substitutions:
      sed 's/old1/new1/g; s/old2/new2/g' file.txt

      Replace and delete:
      sed 's/ERROR/CRITICAL/g; /DEBUG/d' file.txt

      **Order matters!**

      Commands execute in order on each line.

      Example:
      sed 's/cat/dog/; s/dog/bird/' file.txt

      "I have a cat" becomes:
      1. s/cat/dog/ â†’ "I have a dog"
      2. s/dog/bird/ â†’ "I have a bird"

      **Practical example - Clean config file:**

      sed -e '/^#/d' -e '/^$/d' -e 's/=/ = /g' config.txt

      This:
      1. Deletes comments
      2. Deletes blank lines
      3. Adds spaces around =

      **Practice:**

      Transform emails:
      sed 's/@example/@newdomain/g; s/@company/@neworg/g' data/emails.txt

      Clean and modify config:
      sed '/^#/d; /^$/d; s/localhost/server/g' data/config.txt

      Update code:
      sed 's/DEBUG/INFO/g; s/TODO/DONE/g; s/FIXME/FIXED/g' data/code.py

      Redact sensitive info:
      sed 's/password=.*/password=REDACTED/; s/API_KEY = ".*"/API_KEY = "REDACTED"/' data/code.py

      **Try multiple transformations:**
      sed 's/ERROR/[ERR]/g; s/INFO/[INF]/g; s/WARN/[WRN]/g' data/logs.txt
    hint: "Separate commands with ; or use multiple -e flags"
    validation:
      type: "command-output"
      command: "sed 's/ERROR/[ERR]/g; s/INFO/[INF]/g' /home/learner/data/logs.txt | grep '\\[ERR\\]'"
      matcher: "contains"
      expected: "[ERR]"

  - id: "backreferences"
    title: "Capture Groups and Backreferences"
    description: |
      **Capturing with () and Referring with \\1, \\2**

      Capture parts of matched text and reuse them!

      **Syntax:**
      sed 's/\(pattern\)/\1/' file

      \(...\) = capture group (must escape parentheses!)
      \1 = reference to first capture group
      \2 = reference to second capture group
      etc.

      **Examples:**

      Swap two words:
      echo "hello world" | sed 's/\(.*\) \(.*\)/\2 \1/'
      Output: world hello

      Breaking it down:
      \(.*\)  = capture first word â†’ \1
      (space) = literal space
      \(.*\)  = capture second word â†’ \2
      \2 \1   = output in reverse order

      **Add quotes around emails:**
      sed 's/\([a-zA-Z0-9._-]*@[a-zA-Z0-9.-]*\.[a-zA-Z]*\)/"\1"/' emails.txt

      user@example.com â†’ "user@example.com"

      **Extract and transform:**

      Change "key=value" to "KEY: value":
      sed 's/\([a-zA-Z_]*\)=\(.*\)/\U\1: \2/' config.txt

      Note: \U makes captured text uppercase (GNU sed)

      **Duplicate text:**
      echo "test" | sed 's/\(.*\)/\1 \1/'
      Output: test test

      **Add prefixes/suffixes:**

      Add [LOG] prefix to each line:
      sed 's/\(.*\)/[LOG] \1/' file.txt

      Wrap in quotes:
      sed 's/\(.*\)/"\1"/' file.txt

      **Practice:**

      Swap host and port in config:
      echo "host:5432" | sed 's/\(.*\):\(.*\)/\2:\1/'
      Output: 5432:host

      Add quotes around values:
      sed 's/=\(.*\)/="\1"/' data/config.txt

      Extract and emphasize email domains:
      sed 's/\(.*\)@\(.*\)/\1 at **\2**/' data/emails.txt

      Duplicate words:
      echo "hello" | sed 's/\(.*\)/\1 \1/'

      **Try adding quotes around config values:**
      sed 's/=\(.*\)/="\1"/' data/config.txt
    hint: "Use \\(...\\) to capture and \\1, \\2 to reference"
    validation:
      type: "command-output"
      command: "echo 'test=value' | sed 's/=\\(.*\\)/=\"\\1\"/' | grep '\"value\"'"
      matcher: "contains"
      expected: '"value"'

  - id: "insert-append"
    title: "Insert and Append Lines: i and a"
    description: |
      **Insert and Append Commands:**

      **i = insert BEFORE line**
      **a = append AFTER line**

      **Syntax:**
      sed '/pattern/i\text to insert' file
      sed '/pattern/a\text to append' file
      sed '3i\new line' file          # Insert before line 3
      sed '5a\new line' file          # Append after line 5

      **Examples:**

      Insert header at line 1:
      sed '1i\# Configuration File' config.txt

      Append footer at end:
      sed '$a\# End of file' config.txt

      Add line after pattern:
      sed '/\[database\]/a\# Database configuration' config.txt

      Insert before pattern:
      sed '/function/i\# Function definition' code.py

      **Multiple line insertion:**

      GNU sed (with \n):
      sed '1i\Line 1\nLine 2\nLine 3' file.txt

      Or multiple commands:
      sed -e '1i\Line 1' -e '1a\Line 2' file.txt

      **Practical uses:**

      Add shebang to script:
      sed '1i\#!/bin/bash' script.sh

      Add copyright notice:
      sed '1i\# Copyright 2026' file.py

      Add section separators:
      sed '/ERROR/i\=== ERROR DETECTED ===' log.txt

      Add comments before functions:
      sed '/^def /i\# Function' code.py

      **Practice:**

      Add header comment:
      sed '1i\# Config generated on 2026-01-09' data/config.txt

      Add footer:
      sed '$a\# EOF' data/config.txt

      Add section marker before ERROR:
      sed '/ERROR/i\---' data/logs.txt

      Add comment before class:
      sed '/^class /i\# Class definition' data/code.py

      **Try adding a header:**
      sed '1i\# Configuration File - v1.0' data/config.txt | head -5
    hint: "Use i\\ to insert before, a\\ to append after"
    validation:
      type: "command-output"
      command: "sed '1i\\# Header' /home/learner/data/config.txt | head -1"
      matcher: "contains"
      expected: "# Header"

  - id: "change-lines"
    title: "Change Entire Lines with c"
    description: |
      **The c Command: Replace Entire Line**

      c replaces the entire matched line with new text.

      **Syntax:**
      sed '/pattern/c\new text' file
      sed '3c\new line' file

      **Difference from s (substitute):**

      s: Replaces pattern within line:
      "ERROR: failed" â†’ "CRITICAL: failed"

      c: Replaces entire line:
      "ERROR: failed" â†’ "new text"

      **Examples:**

      Replace line 3:
      sed '3c\This is the new line 3' file.txt

      Replace lines with ERROR:
      sed '/ERROR/c\[REDACTED ERROR]' log.txt

      Replace header:
      sed '1c\### New Header ###' file.txt

      **Practical uses:**

      Redact sensitive lines:
      sed '/password/c\password=REDACTED' config.txt

      Replace TODO with implementation:
      sed '/TODO/c\    # Implementation complete' code.py

      Replace deprecation warnings:
      sed '/deprecated/c\# This feature has been removed' code.py

      **With ranges:**

      Replace lines 2-5:
      sed '2,5c\Lines 2-5 replaced' file.txt

      Note: This replaces ALL lines with ONE line!

      **Practice:**

      Redact password line:
      sed '/database_password/c\database_password=REDACTED' data/config.txt

      Replace debug line:
      sed '/app_debug/c\app_debug=false' data/config.txt

      Replace ERROR lines:
      sed '/ERROR/c\[ERROR LOG REDACTED]' data/logs.txt

      Replace API key:
      sed '/API_KEY/c\API_KEY = "REDACTED"' data/code.py

      **Try redacting the password:**
      sed '/password/c\database_password=REDACTED' data/config.txt | grep REDACTED
    hint: "Use c\\ to change entire line: sed '/pattern/c\\new line'"
    validation:
      type: "command-output"
      command: "sed '/password/c\\password=REDACTED' /home/learner/data/config.txt | grep 'REDACTED'"
      matcher: "contains"
      expected: "REDACTED"

  - id: "transform-characters"
    title: "Transform Characters with y"
    description: |
      **The y Command: Character Transliteration**

      y is like tr command - translates characters one-to-one.

      **Syntax:**
      sed 'y/source/dest/' file

      Each character in source is replaced by corresponding character in dest.

      **Examples:**

      Lowercase to uppercase:
      echo "hello" | sed 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'
      Output: HELLO

      ROT13 encoding (simple cipher):
      sed 'y/abcdefghijklmnopqrstuvwxyz/nopqrstuvwxyzabcdefghijklm/' file.txt

      Replace vowels with asterisks:
      echo "hello world" | sed 'y/aeiou/*****/'
      Output: h*ll* w*rld

      **Important:**
      - Source and dest must be same length!
      - Replaces ALL occurrences
      - One-to-one mapping

      **Wrong:**
      sed 'y/abc/XY/'  # ERROR: lengths don't match!

      **Correct:**
      sed 'y/abc/XYZ/'

      **Practical uses:**

      Normalize separators:
      sed 'y/_-/..:/' file.txt
      (replaces _ with ., - with :, etc.)

      Obfuscate text:
      sed 'y/0123456789/9876543210/' file.txt
      (reverses digits)

      **vs s (substitute):**

      s: Pattern-based, can use regex
      sed 's/cat/dog/'

      y: Character-based, no regex
      sed 'y/abc/xyz/'

      **Practice:**

      Convert to uppercase (simplified):
      echo "test" | sed 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'

      Mask digits:
      echo "ID: 12345" | sed 'y/0123456789/**********/'
      Output: ID: *****

      Reverse digits:
      echo "Score: 123" | sed 'y/0123456789/9876543210/'
      Output: Score: 876

      **Try masking digits:**
      sed 'y/0123456789/**********/' data/config.txt | head -3
    hint: "Use y/source/dest/ for character translation"
    validation:
      type: "command-output"
      command: "echo '12345' | sed 'y/0123456789/**********/' | grep '*****'"
      matcher: "contains"
      expected: "*****"

  - id: "sed-scripts"
    title: "sed Scripts and Advanced Usage"
    description: |
      **sed Scripts: Complex Editing Workflows**

      For complex tasks, create sed script files.

      **Create script file:**

      cat > transform.sed << 'EOF'
      # Remove comments and blank lines
      /^#/d
      /^$/d

      # Normalize spacing
      s/=/ = /g
      s/  */ /g

      # Update values
      s/localhost/prod-server/g
      s/DEBUG/INFO/g

      # Add header
      1i\# Production Configuration

      # Add footer
      $a\# End of Configuration
      EOF

      **Execute script:**
      sed -f transform.sed config.txt

      **Advantages:**
      - Organize complex transformations
      - Comment each step
      - Reusable
      - Version control
      - Share with team

      **Real-world example - Log cleaning:**

      cat > clean_logs.sed << 'EOF'
      # Remove DEBUG lines
      /DEBUG/d

      # Anonymize IPs
      s/[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}/XXX.XXX.XXX.XXX/g

      # Redact emails
      s/[a-zA-Z0-9._-]*@[a-zA-Z0-9.-]*/user@REDACTED/g

      # Format timestamps
      s/\([0-9]\{4\}\)-\([0-9]\{2\}\)-\([0-9]\{2\}\)/[\1-\2-\3]/

      # Add severity prefix
      s/ERROR/[HIGH] ERROR/
      s/WARN/[MED] WARN/
      s/INFO/[LOW] INFO/
      EOF

      sed -f clean_logs.sed application.log > cleaned.log

      **Config migration example:**

      cat > migrate_config.sed << 'EOF'
      # Update database settings
      s/database_host=localhost/db_host=prod-db-01.internal/
      s/database_port=5432/db_port=5433/
      s/database_user=/db_user=/

      # Update app settings
      s/app_debug=true/app_debug=false/
      s/app_version=1\.0\.0/app_version=2.0.0/

      # Add new settings
      /max_connections/a\
      connection_timeout=30\
      pool_size=20

      # Remove deprecated settings
      /cache_enabled/d
      EOF

      **Practice:**

      Create a config transformation script:
      cat > transform.sed << 'EOF'
      /^$/d
      s/localhost/production-server/g
      s/DEBUG/INFO/g
      s/=/ = /g
      1i\# Transformed Configuration
      EOF

      Apply it:
      sed -f transform.sed data/config.txt

      **Try creating and running a script:**
      cat > /tmp/clean.sed << 'EOF'
      /^#/d
      s/@example/@production/g
      EOF

      sed -f /tmp/clean.sed data/emails.txt
    hint: "Create script file with commands, use with sed -f script.sed"
    validation:
      type: "command-output"
      command: "echo 's/test/PASS/' > /tmp/test.sed && echo 'test' | sed -f /tmp/test.sed"
      matcher: "contains"
      expected: "PASS"

completion:
  message: |
    ðŸŽ‰ SED MASTERY ACHIEVED! ðŸŽ‰

    You've mastered the sed stream editor!

    **What You've Learned:**

    âœ“ sed basics and stream editing concept
    âœ“ Substitute command (s/old/new/g)
    âœ“ In-place editing (-i)
    âœ“ Line addressing and ranges
    âœ“ Delete command (d)
    âœ“ Multiple commands (-e, ;)
    âœ“ Capture groups and backreferences
    âœ“ Insert (i) and append (a) commands
    âœ“ Change command (c)
    âœ“ Transform command (y)
    âœ“ sed scripts for complex workflows

    **Command Summary:**

    **Substitute:**
    s/old/new/       Replace first occurrence
    s/old/new/g      Replace all occurrences
    s/old/new/2      Replace 2nd occurrence
    s/old/new/ig     Case-insensitive global

    **Delete:**
    d                Delete line
    /pattern/d       Delete lines matching pattern
    /^$/d            Delete empty lines
    /^#/d            Delete comments

    **Insert/Append:**
    i\text           Insert before line
    a\text           Append after line
    c\text           Change (replace) entire line

    **Addressing:**
    3                Line 3
    $                Last line
    2,5              Lines 2-5
    /pattern/        Lines matching pattern
    /start/,/end/    Range from start to end pattern

    **Options:**
    -e 'cmd'         Execute command
    -f script        Execute script file
    -i               In-place edit
    -i.bak           In-place with backup
    -n               Suppress default output
    -r or -E         Extended regex

    **Advanced:**
    \(...\)          Capture group
    \1, \2           Backreferences
    y/src/dst/       Character transliteration

    **Common Patterns:**

    Remove blank lines:
    sed '/^$/d'

    Remove comments:
    sed '/^#/d'

    Remove both:
    sed '/^#/d; /^$/d'

    Add quotes around values:
    sed 's/=\(.*\)/="\1"/'

    Swap fields:
    sed 's/\(.*\):\(.*\)/\2:\1/'

    Change config value:
    sed 's/^key=.*/key=newvalue/'

    Redact sensitive data:
    sed 's/password=.*/password=REDACTED/g'

    **Best Practices:**

    â˜‘ Test without -i first
    â˜‘ Always use -i.bak for safety
    â˜‘ Use sed scripts for complex tasks
    â˜‘ Comment your sed commands
    â˜‘ Escape special characters in regex
    â˜‘ Use specific patterns over general .*
    â˜‘ Combine with other tools (grep, awk)

    **When to Use sed:**

    âœ“ Find and replace in files
    âœ“ Automated text transformations
    âœ“ Config file migrations
    âœ“ Log cleaning and formatting
    âœ“ Code refactoring (simple cases)
    âœ“ Data anonymization

    **When NOT to Use sed:**

    âœ— Complex parsing (use awk, python)
    âœ— Multi-line patterns (use perl, python)
    âœ— Binary files (use specialized tools)
    âœ— When clarity matters more than one-liners

    **sed vs Other Tools:**

    grep:  Search only
    sed:   Search and replace
    awk:   Advanced text processing, columnar data
    perl:  Complex regex and scripting

    You now have professional sed skills for text manipulation!

    OUTSTANDING WORK!
  xp: 500
  unlocks:
    - "linux/week13/practice-log-parsing"
    - "linux/week14/ssh-basics-beginner"
